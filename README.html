<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>&#x4ecb;&#x7ecd;</title>
            <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only],
.vscode-high-contrast:not(.vscode-high-contrast-light) img[src$=\#gh-light-mode-only],
.vscode-high-contrast-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
            
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
<style>
:root {
  --color-note: #0969da;
  --color-tip: #1a7f37;
  --color-warning: #9a6700;
  --color-severe: #bc4c00;
  --color-caution: #d1242f;
  --color-important: #8250df;
}

</style>
<style>
@media (prefers-color-scheme: dark) {
  :root {
    --color-note: #2f81f7;
    --color-tip: #3fb950;
    --color-warning: #d29922;
    --color-severe: #db6d28;
    --color-caution: #f85149;
    --color-important: #a371f7;
  }
}

</style>
<style>
.markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid #888;
}

.markdown-alert>:first-child {
  margin-top: 0
}

.markdown-alert>:last-child {
  margin-bottom: 0
}

.markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1
}

.markdown-alert .markdown-alert-title .octicon {
  margin-right: 0.5rem;
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-alert.markdown-alert-note {
  border-left-color: var(--color-note);
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-note);
}

.markdown-alert.markdown-alert-important {
  border-left-color: var(--color-important);
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-important);
}

.markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-warning);
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-warning);
}

.markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-tip);
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-tip);
}

.markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-caution);
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-caution);
}

</style>
        
        </head>
        <body class="vscode-body vscode-light">
            <h2 id="介绍">介绍</h2>
<p><a href="https://github.com/KobeCYL/openapi2typescript"><img src="https://img.shields.io/github/stars/KobeCYL/openapi2typescript?style=social" alt="GitHub Repo stars"></a> <a href="https://www.npmjs.com/package/imi-openapi-tools"><img src="https://img.shields.io/npm/v/imi-openapi-tools" alt="npm (scoped)"></a> <img src="https://img.shields.io/github/v/tag/KobeCYL/openapi2typescript?include_prereleases" alt="GitHub tag (latest SemVer pre-release)"></p>
<p>根据 <a href="https://swagger.io/blog/news/whats-new-in-openapi-3-0/">OpenApi3</a> 文档生成 request 请求代码。</p>
<p>如果你使用 <a href="https://umijs.org">umi</a> ,你可以使用<a href="https://www.npmjs.com/package/@umijs/plugin-openapi">@umijs/plugin-openapi</a> 插件。</p>
<h2 id="使用">使用</h2>
<pre><code class="language-node">npm i --save-dev imi-openapi-tools
</code></pre>
<p>在项目根目录新建 <code>openapi.config.ts</code></p>
<pre><code class="language-ts"><span class="hljs-keyword">const</span> { generateService } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;imi-openapi-tools&#x27;</span>);

<span class="hljs-title function_">generateService</span>({
  <span class="hljs-attr">schemaPath</span>: <span class="hljs-string">&#x27;http://petstore.swagger.io/v2/swagger.json&#x27;</span>,
  <span class="hljs-attr">serversPath</span>: <span class="hljs-string">&#x27;./servers&#x27;</span>,
});
</code></pre>
<p>在 <code>package.json</code> 的 <code>script</code> 中添加 api: <code>&quot;openapi&quot;: &quot;ts-node openapi.config.ts&quot;,</code></p>
<p>生成 api</p>
<pre><code class="language-node">npm run openapi
=======
```bash
npm i --save-dev imi-openapi-tools
</code></pre>
<p>在项目根目录新建 <code>openapi2ts.config.ts</code> 或者 <code>.openapi2tsrc.ts</code></p>
<blockquote>
<p>配置文件还支持 <em><strong>openapi2ts.config.ts</strong></em>, <em><strong>.openapi2tsrc.json</strong></em> 等格式，参考 <a href="https://github.com/cosmiconfig/cosmiconfig?tab=readme-ov-file#cosmiconfig">cosmiconfig</a></p>
</blockquote>
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">schemaPath</span>: <span class="hljs-string">&#x27;http://petstore.swagger.io/v2/swagger.json&#x27;</span>,
  <span class="hljs-attr">serversPath</span>: <span class="hljs-string">&#x27;./servers&#x27;</span>,
}
</code></pre>
<p>如果单个项目有多个生成需求，支持传入数组配置</p>
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [
  {
    <span class="hljs-attr">schemaPath</span>: <span class="hljs-string">&#x27;http://app.swagger.io/v2/swagger.json&#x27;</span>,
    <span class="hljs-attr">serversPath</span>: <span class="hljs-string">&#x27;./servers/app&#x27;</span>,
  },
  {
    <span class="hljs-attr">schemaPath</span>: <span class="hljs-string">&#x27;http://auth.swagger.io/v2/swagger.json&#x27;</span>,
    <span class="hljs-attr">serversPath</span>: <span class="hljs-string">&#x27;./servers/auth&#x27;</span>,
  }
]
</code></pre>
<p>在 <code>package.json</code> 的 <code>script</code> 中添加 api: <code>&quot;openapi2ts&quot;: &quot;openapi2ts&quot;,</code></p>
<p>生成api</p>
<pre><code class="language-bash">npm run openapi2ts
</code></pre>
<h2 id="参数">参数</h2>
<table>
<thead>
<tr>
<th>属性</th>
<th>必填</th>
<th>备注</th>
<th>类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td>requestLibPath</td>
<td>否</td>
<td>自定义请求方法路径</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td>requestOptionsType</td>
<td>否</td>
<td>自定义请求方法 options 参数类型</td>
<td>string</td>
<td>{[key: string]: any}</td>
</tr>
<tr>
<td>requestImportStatement</td>
<td>否</td>
<td>自定义请求方法表达式</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td>apiPrefix</td>
<td>否</td>
<td>api 的前缀</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td>serversPath</td>
<td>否</td>
<td>生成的文件夹的路径</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td>schemaPath</td>
<td>否</td>
<td>Swagger 2.0 或 OpenAPI 3.0 的地址</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td>projectName</td>
<td>否</td>
<td>项目名称</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td>namespace</td>
<td>否</td>
<td>命名空间名称</td>
<td>string</td>
<td>API</td>
</tr>
<tr>
<td>mockFolder</td>
<td>否</td>
<td>mock 目录</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td>enumStyle</td>
<td>否</td>
<td>枚举样式</td>
<td>string-literal | enum</td>
<td>string-literal</td>
</tr>
<tr>
<td>nullable</td>
<td>否</td>
<td>使用 null 代替可选</td>
<td>boolean</td>
<td>false</td>
</tr>
<tr>
<td>dataFields</td>
<td>否</td>
<td>response 中数据字段</td>
<td>string[]</td>
<td>-</td>
</tr>
<tr>
<td>=======</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>属性</td>
<td>必填</td>
<td>备注</td>
<td>类型</td>
<td>默认值</td>
</tr>
<tr>
<td>----</td>
<td>----</td>
<td>----</td>
<td>----</td>
<td>-</td>
</tr>
<tr>
<td>requestLibPath</td>
<td>否</td>
<td>自定义请求方法路径</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td>requestOptionsType</td>
<td>否</td>
<td>自定义请求方法 options 参数类型</td>
<td>string</td>
<td>{[key: string]: any}</td>
</tr>
<tr>
<td>requestImportStatement</td>
<td>否</td>
<td>自定义请求方法表达式</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td>apiPrefix</td>
<td>否</td>
<td>api 的前缀</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td>serversPath</td>
<td>否</td>
<td>生成的文件夹的路径</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td>schemaPath</td>
<td>否</td>
<td>Swagger 2.0 或 OpenAPI 3.0 的地址</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td>projectName</td>
<td>否</td>
<td>项目名称</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td>authorization</td>
<td>否</td>
<td>文档登录凭证</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td>namespace</td>
<td>否</td>
<td>命名空间名称</td>
<td>string</td>
<td>API</td>
</tr>
<tr>
<td>mockFolder</td>
<td>否</td>
<td>mock目录</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td>enumStyle</td>
<td>否</td>
<td>枚举样式</td>
<td>string-literal | enum</td>
<td>string-literal</td>
</tr>
<tr>
<td>nullable</td>
<td>否</td>
<td>使用null代替可选</td>
<td>boolean</td>
<td>false</td>
</tr>
<tr>
<td>dataFields</td>
<td>否</td>
<td>response中数据字段</td>
<td>string[]</td>
<td>-</td>
</tr>
<tr>
<td>isCamelCase</td>
<td>否</td>
<td>小驼峰命名文件和请求函数</td>
<td>boolean</td>
<td>true</td>
</tr>
<tr>
<td>declareType</td>
<td>否</td>
<td>interface 声明类型(适配不同的规范)</td>
<td>type/interface</td>
<td>type</td>
</tr>
<tr>
<td>mockConfig</td>
<td>否</td>
<td>mock配置</td>
<td><a href="#Mock-Config">Mock Config</a></td>
<td>-</td>
</tr>
<tr>
<td>hook</td>
<td>否</td>
<td>自定义 hook</td>
<td><a href="#Custom-Hook">Custom Hook</a></td>
<td>-</td>
</tr>
</tbody>
</table>
<h2 id="custom-hook">Custom Hook</h2>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>afterOpenApiDataInited</td>
<td>(openAPIData: OpenAPIObject) =&gt; OpenAPIObject</td>
<td>-</td>
</tr>
<tr>
<td>customFunctionName</td>
<td>(data: APIDataType) =&gt; string</td>
<td>自定义请求方法函数名称</td>
</tr>
<tr>
<td>customTypeName</td>
<td>(data: APIDataType) =&gt; string</td>
<td>自定义类型名称</td>
</tr>
<tr>
<td>customClassName</td>
<td>(tagName: string) =&gt; string</td>
<td>自定义类名</td>
</tr>
<tr>
<td>customType</td>
<td>(<br>schemaObject: SchemaObject | undefined,<br>namespace: string,<br>originGetType:(schemaObject: SchemaObject | undefined, namespace: string) =&gt; string,<br>) =&gt; string</td>
<td>自定义获取类型 <br> <em>返回非字符串将使用默认方法获取 type</em></td>
</tr>
<tr>
<td>customFileNames</td>
<td>(<br>operationObject: OperationObject,<br>apiPath: string,<br>_apiMethod: string,<br>) =&gt; string[]</td>
<td>自定义生成文件名，可返回多个，表示生成多个文件. <br> <em>返回为空，则使用默认的获取方法获取</em></td>
</tr>
</tbody>
</table>
<h2 id="mock-config">Mock Config</h2>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>msw</td>
<td>boolean</td>
<td>msw类型mock文件格式.  直接返回对象<br>举例:<br>// @ts-ignore<br><br>export default {<br>'DELETE /mydata/delete': { message: { message: 'Mydata successfully deleted' } }<br>};<br><br><br>原文件:<br>// @ts-ignore<br>import { Request, Response } from 'express';<br><br>export default {<br>'DELETE /mydata/delete': (req: Request, res: Response) =&gt; {<br>res.status(200).send({ message: { message: 'Mydata successfully deleted' } });<br>},<br>};</td>
</tr>
</tbody>
</table>

            
            
        </body>
        </html>